# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
- master

pool:
  name: UFTONE
steps:
# - script: |
#     python -m pip install --upgrade pip
#     pip install setuptools wheel twine
#   displayName: 'Install dependencies'
- script: |
      python -m pip install --upgrade pip
      pip install build
      pip install twine keyring artifacts-keyring
    # pip install setuptools wheel twine
    # pip install --upgrade setuptools
  displayName: 'Install build and twine'

- script: |
     python setup.py sdist bdist_wheel
     twine upload -r PythonFeed dist/*
    
  displayName: 'twine upload'

# - script: |
#     python -m build 
#   displayName: 'Python build'

# - task: TwineAuthenticate@1
#   inputs:
#     artifactFeed: tvsmsoftwarefactory/PythonFeed
#   displayName: 'Twine Authenticate'

# - script: |
#     python setup.py sdist bdist_wheel
#     python -m twine upload -r PythonFeed
#   displayName: 'Upload to feed'